/* hide ugly animation */
.sidebar-animation-screenshot {visibility: collapse !important;}

#sidebar-main{
  --txt-color: var(--bg-txt);
  background: transparent !important;
  overflow: visible !important;
}

/* new sidebar panel */
.wrapper:has(.tools-and-extensions) {
  background: transparent !important;
  color: var(--txt-color) !important;
  border: 0px solid transparent !important;
  
  padding: 0px !important;
  padding-bottom: calc( var(--margin) / 1.5 ) !important;
  
  &:has(.expanded-button) { padding-inline: var(--toolbar-start-end-padding) !important; }
  
  min-width: 0px !important;
  .tools-and-extensions, .bottom-actions { padding-inline: 0px !important }
  
  :is(.tools-and-extensions, .bottom-actions) moz-button { margin-block-start: 4px !important; }
}

.actions-list {
  & > moz-button {
    --button-outer-padding-inline: 0px !important;
    --button-outer-padding-block: 0px !important;
    --button-outer-padding-block-end: 0px !important;
  }
}


/* tabs */


/* rm scrollbars */
#tabbrowser-arrowscrollbox, #vertical-pinned-tabs-container{
  --vertical-tabs-scrollbox-width: none;
}

scrollbox, #vertical-pinned-tabs-container{
  scrollbar-width: var(--vertical-tabs-scrollbox-width) !important;
}

/* pinned tabs */
#vertical-pinned-tabs-container:not(:empty){ margin-top: var(--margin) !important; }

#vertical-tabs #tabbrowser-tabs[expanded] #vertical-pinned-tabs-container{
  padding-inline: 0px !important;
  display: flex !important;
  flex-wrap: wrap;
  flex-direction: row;
  
  --grid-gap: 5px;
  width: calc( 100% + var(--grid-gap) ) !important;
  grid-gap: var(--grid-gap) !important;
  
  .tabbrowser-tab[pinned]{
    --wm: 3; --hm: 1; min-width: 0px !important;
    width: calc( 100% / var(--wm) - var(--grid-gap) ) !important;
    height: calc( var(--sdbr-wdt) / 4.6 / var(--hm) ) !important;
  }
  
  .tabbrowser-tab[pinned]:nth-child(1):last-child
    {--wm: 1; --hm: 1.4;}
  
  &:has(.tabbrowser-tab:nth-child(3n + 2):last-child)
    .tabbrowser-tab:nth-last-child(-n + 2)
      {--wm: 2; --hm: 1.2;}
  
  &:has(.tabbrowser-tab:nth-child(3n + 4):last-child)
    .tabbrowser-tab:nth-last-child(-n + 4)
      {--wm: 4; --hm: 1.3;}
  
  .tabbrowser-tab[pinned] .tab-background{
    margin: 0px !important;
    border-radius: var(--big-rounding) !important;
    height: 100% !important;
    width: 100% !important;
  }
  
  .tab-icon-image, .tab-icon-stack{
    height: var(--pinned-tab-icon-size) !important;
    width: var(--pinned-tab-icon-size) !important;
  }
}